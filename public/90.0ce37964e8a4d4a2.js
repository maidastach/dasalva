"use strict";(self.webpackChunkdasalva=self.webpackChunkdasalva||[]).push([[90],{1090:(I,f,m)=>{m.r(f),m.d(f,{AuthModule:()=>F});var d=m(9808),a=m(3809),h=m(655),t=m(2382),u=m(1520),e=m(1223),c=m(9558),g=m(5965);const Z=["email"];let v=(()=>{class o{constructor(r,s,i,l,p){this.fb=r,this.authService=s,this.route=i,this.router=l,this.loadingService=p}ngAfterViewInit(){this.email.nativeElement.focus()}ngOnInit(){this.form=this.fb.group({email:["",[u.Le,t.kI.required]],password:["",[u.ym,t.kI.required]],repassword:["",[t.kI.required,t.kI.minLength(8),t.kI.maxLength(20)]]}),this.loadingService.errorMsg.subscribe(r=>{r&&(this.loading=!1,this.form.controls.password.reset(),this.form.controls.repassword.reset())})}updatePassword(){if(this.loading=!0,this.form.value.password===this.form.value.repassword){const i=(0,h._T)(this.form.value,["repassword"]),{token:l}=this.route.snapshot.params;this.authService.updatePassword(Object.assign(Object.assign({},i),{token:l})).subscribe(p=>{this.loading=!1,this.authService.userSource.next(p),this.form.reset(),this.router.navigate(["/user/profile"])})}else this.loading=!1,this.form.controls.repassword.setErrors({notMatching:{valid:!1}}),this.loadingService.errorMsgSource.next("Passwords do not match")}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(t.qu),e.Y36(c.e),e.Y36(a.gz),e.Y36(a.F0),e.Y36(g.b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-newpassword"]],viewQuery:function(r,s){if(1&r&&e.Gf(Z,5),2&r){let i;e.iGM(i=e.CRH())&&(s.email=i.first)}},decls:23,vars:5,consts:[[1,"row","justify-content-center","mt-5",3,"formGroup"],[1,"col-sm-10","col-md-8","col-lg-6","col-xxl-4","list-unstyled","pt-sm-5"],[1,"mb-4","mb-sm-5","text-center"],[1,"form-floating"],["formControlName","email","type","text","placeholder","Email",1,"form-control","reset-input",3,"ngClass"],["email",""],["for","email"],["formControlName","password","type","password","placeholder","New Password",1,"form-control","reset-input",3,"ngClass"],["for","password"],["aria-describedby","passwordHelpBlock",1,"form-floating"],["formControlName","repassword","type","password","placeholder","Confirm your password",1,"form-control","reset-input",3,"ngClass"],["for","repassword"],["id","passwordHelpBlock",1,"form-text","form-small","text-center"],[1,"my-4","text-center"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(r,s){1&r&&(e.TgZ(0,"form",0),e.TgZ(1,"ul",1),e.TgZ(2,"li",2),e.TgZ(3,"h1"),e._uU(4,"Create New Password"),e.qZA(),e.qZA(),e.TgZ(5,"li",3),e._UZ(6,"input",4,5),e.TgZ(8,"label",6),e._uU(9,"Email"),e.qZA(),e.qZA(),e.TgZ(10,"li",3),e._UZ(11,"input",7),e.TgZ(12,"label",8),e._uU(13,"New Password"),e.qZA(),e.qZA(),e.TgZ(14,"li",9),e._UZ(15,"input",10),e.TgZ(16,"label",11),e._uU(17,"Confirm your password"),e.qZA(),e.TgZ(18,"div",12),e._uU(19," Password must be 8-20 characters long and including one number "),e.qZA(),e.qZA(),e.TgZ(20,"li",13),e.TgZ(21,"button",14),e.NdJ("click",function(){return s.updatePassword()}),e._uU(22,"Change Password"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&r&&(e.Q6J("formGroup",s.form),e.xp6(6),e.Q6J("ngClass",s.form.controls.email.hasError("validateEmail")?"is-invalid":s.form.controls.email.errors?"":"is-valid"),e.xp6(5),e.Q6J("ngClass",s.form.controls.password.hasError("validatePassword")?"is-invalid":s.form.controls.password.errors?"":"is-valid"),e.xp6(4),e.Q6J("ngClass",s.form.controls.repassword.hasError("notMatching")?"is-invalid":""),e.xp6(6),e.Q6J("disabled",!s.form.valid||s.loading))},directives:[t._Y,t.JL,t.sg,t.Fj,t.JJ,t.u,d.mk],styles:[""]}),o})();const w=["fname"];let b=(()=>{class o{constructor(r,s,i,l){this.fb=r,this.authService=s,this.router=i,this.loadingService=l}ngAfterViewInit(){this.fname.nativeElement.focus()}ngOnInit(){this.registerForm=this.fb.group({fname:["",[t.kI.minLength(3),t.kI.required]],lname:["",[t.kI.minLength(3),t.kI.required]],email:["",[u.Le,t.kI.required]],telephone:["",[u.xG,t.kI.minLength(8),t.kI.maxLength(12),t.kI.required]],password:["",[u.ym,t.kI.required]],repassword:["",[t.kI.required,t.kI.minLength(8),t.kI.maxLength(20)]]}),this.loadingService.errorMsg.subscribe(r=>{r&&(this.loading=!1,this.registerForm.controls.password.reset(),this.registerForm.controls.repassword.reset(),r.includes("registered")&&this.registerForm.controls.email.patchValue(""))})}register(){this.loading=!0,this.registerForm.value.password===this.registerForm.value.repassword?this.authService.registerUser(this.registerForm.value).subscribe(r=>{this.loading=!1,this.registerForm.reset(),this.router.navigate(["/auth/signin"])}):(this.loading=!1,this.registerForm.controls.repassword.setErrors({notMatching:{valid:!1}}),this.loadingService.errorMsgSource.next("Passwords do not match"))}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(t.qu),e.Y36(c.e),e.Y36(a.F0),e.Y36(g.b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-register"]],viewQuery:function(r,s){if(1&r&&e.Gf(w,5),2&r){let i;e.iGM(i=e.CRH())&&(s.fname=i.first)}},decls:45,vars:8,consts:[[3,"formGroup","submit"],[1,"list-unstyled","mt-5"],[1,"mb-5","text-center","h1"],[1,"row","justify-content-center","my-2"],[1,"form-floating","col-md-5","col-xl-4"],["type","name","formControlName","fname","placeholder","First Name",1,"form-control",3,"ngClass"],["fname",""],["for","fname",1,"form-label"],["type","name","formControlName","lname","placeholder","Last Name",1,"form-control",3,"ngClass"],["for","lname",1,"form-label"],["type","email","formControlName","email","placeholder","example@email.com",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","text","formControlName","telephone","placeholder","123456789",1,"form-control",3,"ngClass"],["for","telephone",1,"form-label"],["aria-describedby","passwordHelpBlock",1,"row","justify-content-center","my-2"],[1,"col-md-5","col-xl-4","form-floating"],["type","password","formControlName","password","placeholder","password",1,"form-control",3,"ngClass"],["for","password",1,"form-label"],["type","password","formControlName","repassword","placeholder","password",1,"form-control",3,"ngClass"],["for","repassword",1,"form-label"],["id","passwordHelpBlock",1,"form-text","form-small","text-center"],[1,"row","text-center","py-4"],["type","submit",1,"btn","btn-primary","btn-lg","mb-3",3,"disabled"],["routerLink","/auth/signin"]],template:function(r,s){1&r&&(e.TgZ(0,"form",0),e.NdJ("submit",function(){return s.register()}),e.TgZ(1,"ul",1),e.TgZ(2,"li",2),e._uU(3," Create Account "),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"li",4),e._UZ(6,"input",5,6),e.TgZ(8,"label",7),e._uU(9,"First Name"),e.qZA(),e.qZA(),e.TgZ(10,"li",4),e._UZ(11,"input",8),e.TgZ(12,"label",9),e._uU(13,"Last Name"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",3),e.TgZ(15,"li",4),e._UZ(16,"input",10),e.TgZ(17,"label",11),e._uU(18,"Email"),e.qZA(),e.qZA(),e.TgZ(19,"li",4),e._UZ(20,"input",12),e.TgZ(21,"label",13),e._uU(22,"Phone Number"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"li",14),e.TgZ(24,"div",15),e._UZ(25,"input",16),e.TgZ(26,"label",17),e._uU(27,"Password"),e.qZA(),e.qZA(),e.TgZ(28,"div",15),e._UZ(29,"input",18),e.TgZ(30,"label",19),e._uU(31,"Confirm Password"),e.qZA(),e.qZA(),e.TgZ(32,"div",20),e._uU(33," Password must be 8-20 characters long and including one number"),e._UZ(34,"br"),e._uU(35," We'll never share your details with anyone else. "),e.qZA(),e.qZA(),e.TgZ(36,"div",21),e.TgZ(37,"li"),e.TgZ(38,"button",22),e._uU(39,"Register"),e.qZA(),e.qZA(),e.TgZ(40,"li"),e.TgZ(41,"div"),e._uU(42," Already Registered? "),e.TgZ(43,"a",23),e._uU(44,"Sign In"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&r&&(e.Q6J("formGroup",s.registerForm),e.xp6(6),e.Q6J("ngClass",s.registerForm.controls.fname.pristine?"":s.registerForm.controls.fname.errors?"is-invalid":"is-valid"),e.xp6(5),e.Q6J("ngClass",s.registerForm.controls.lname.pristine?"":s.registerForm.controls.lname.errors?"is-invalid":"is-valid"),e.xp6(5),e.Q6J("ngClass",s.registerForm.controls.email.hasError("validateEmail")?"is-invalid":s.registerForm.controls.email.errors?"":"is-valid"),e.xp6(4),e.Q6J("ngClass",s.registerForm.controls.telephone.pristine?"":s.registerForm.controls.telephone.errors?"is-invalid":"is-valid"),e.xp6(5),e.Q6J("ngClass",s.registerForm.controls.password.hasError("validatePassword")?"is-invalid":s.registerForm.controls.password.errors?"":"is-valid"),e.xp6(4),e.Q6J("ngClass",s.registerForm.controls.repassword.hasError("notMatching")?"is-invalid":""),e.xp6(9),e.Q6J("disabled",!s.registerForm.valid||s.loading))},directives:[t._Y,t.JL,t.sg,t.Fj,t.JJ,t.u,d.mk,a.yS],styles:[""]}),o})();const A=["email"];let T=(()=>{class o{constructor(r,s,i,l){this.authService=r,this.fb=s,this.router=i,this.loadingService=l}ngAfterViewInit(){this.email.nativeElement.focus()}ngOnInit(){this.form=this.fb.group({email:["",[t.kI.required,u.Le]]}),this.loadingService.errorMsg.subscribe(r=>{r&&(this.errorMsg=r,this.form.controls.email.patchValue(""))}),this.loadingService.loading.subscribe(r=>this.loading=r)}resendToken(){this.authService.resendToken(this.form.controls.email.value).subscribe(s=>{this.form.reset(),this.router.navigate(["/auth/signin"])})}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(c.e),e.Y36(t.qu),e.Y36(a.F0),e.Y36(g.b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-resendtoken"]],viewQuery:function(r,s){if(1&r&&e.Gf(A,5),2&r){let i;e.iGM(i=e.CRH())&&(s.email=i.first)}},decls:16,vars:3,consts:[[1,"row","justify-content-center","mt-5",3,"formGroup"],[1,"col-sm-10","col-md-8","col-lg-6","col-xxl-4","list-unstyled","pt-sm-5"],[1,"mb-4","mb-sm-5","text-center"],[1,"form-floating"],["formControlName","email","type","email","placeholder","Email",1,"form-control","reset-input",3,"ngClass"],["email",""],["for","email"],[1,"my-4","text-center"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"text-center"],["routerLink","/auth/signin",1,"nav-link","create-account"]],template:function(r,s){1&r&&(e.TgZ(0,"form",0),e.TgZ(1,"ul",1),e.TgZ(2,"li",2),e.TgZ(3,"h1"),e._uU(4,"Request Verification Token"),e.qZA(),e.qZA(),e.TgZ(5,"li",3),e._UZ(6,"input",4,5),e.TgZ(8,"label",6),e._uU(9,"Email"),e.qZA(),e.qZA(),e.TgZ(10,"li",7),e.TgZ(11,"button",8),e.NdJ("click",function(){return s.resendToken()}),e._uU(12,"Get Verification Token"),e.qZA(),e.qZA(),e.TgZ(13,"li",9),e.TgZ(14,"a",10),e._uU(15,"Go Back"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&r&&(e.Q6J("formGroup",s.form),e.xp6(6),e.Q6J("ngClass",s.form.controls.email.hasError("validateEmail")?"is-invalid":s.form.controls.email.errors?"":"is-valid"),e.xp6(5),e.Q6J("disabled",!s.form.valid||s.loading))},directives:[t._Y,t.JL,t.sg,t.Fj,t.JJ,t.u,d.mk,a.yS],styles:[""]}),o})();const q=["email"];let y=(()=>{class o{constructor(r,s,i,l){this.authService=r,this.fb=s,this.router=i,this.loadingService=l}ngAfterViewInit(){this.email.nativeElement.focus()}ngOnInit(){this.form=this.fb.group({email:["",[t.kI.required,u.Le]]}),this.loadingService.errorMsg.subscribe(r=>{r&&(this.errorMsg=r,this.form.controls.email.patchValue(""))}),this.loadingService.loading.subscribe(r=>this.loading=r)}resetPassword(){this.authService.resetPassword(this.form.controls.email.value).subscribe(s=>{this.form.reset(),this.router.navigate(["/auth/signin"])})}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(c.e),e.Y36(t.qu),e.Y36(a.F0),e.Y36(g.b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-resetpassword"]],viewQuery:function(r,s){if(1&r&&e.Gf(q,5),2&r){let i;e.iGM(i=e.CRH())&&(s.email=i.first)}},decls:16,vars:3,consts:[[1,"row","justify-content-center","mt-5",3,"formGroup"],[1,"col-sm-10","col-md-8","col-lg-6","col-xxl-4","list-unstyled","pt-sm-5"],[1,"mb-4","mb-sm-5","text-center"],[1,"form-floating"],["formControlName","email","type","email","placeholder","Email",1,"form-control","reset-input",3,"ngClass"],["email",""],["for","email"],[1,"my-4","text-center"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"text-center"],["routerLink","/auth/signin",1,"nav-link","create-account"]],template:function(r,s){1&r&&(e.TgZ(0,"form",0),e.TgZ(1,"ul",1),e.TgZ(2,"li",2),e.TgZ(3,"h1"),e._uU(4,"Reset Password"),e.qZA(),e.qZA(),e.TgZ(5,"li",3),e._UZ(6,"input",4,5),e.TgZ(8,"label",6),e._uU(9,"Email"),e.qZA(),e.qZA(),e.TgZ(10,"li",7),e.TgZ(11,"button",8),e.NdJ("click",function(){return s.resetPassword()}),e._uU(12,"Get Reset Instructions"),e.qZA(),e.qZA(),e.TgZ(13,"li",9),e.TgZ(14,"a",10),e._uU(15,"Go Back"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&r&&(e.Q6J("formGroup",s.form),e.xp6(6),e.Q6J("ngClass",s.form.controls.email.hasError("validateEmail")?"is-invalid":s.form.controls.email.errors?"":"is-valid"),e.xp6(5),e.Q6J("disabled",!s.form.valid||s.loading))},directives:[t._Y,t.JL,t.sg,t.Fj,t.JJ,t.u,d.mk,a.yS],styles:[""]}),o})();const C=["email"],_=[{path:"signin",component:(()=>{class o{constructor(r,s,i,l){this.fb=r,this.authService=s,this.router=i,this.loadingService=l}ngAfterViewInit(){this.emailField.nativeElement.focus()}ngOnInit(){this.signInForm=this.fb.group({email:["",[u.Le,t.kI.required]],password:["",[t.kI.required]]}),this.loadingService.errorMsg.subscribe(r=>{r&&(this.loading=!1,r.includes("Password")?(this.signInForm.controls.password.patchValue(""),this.invalid=!0):this.signInForm.reset())})}signIn(){this.loading=!0,(0,u.dt)(this.signInForm.value.password)?(this.invalid=!1,this.authService.signIn(this.signInForm.value).subscribe(r=>{this.loading=!1,this.authService.userSource.next(r),this.router.navigate(["/user/place-order"]),this.signInForm.reset()})):(this.invalid=!0,this.loadingService.errorMsgSource.next("Invalid Password"),this.signInForm.controls.password.reset())}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(t.qu),e.Y36(c.e),e.Y36(a.F0),e.Y36(g.b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-signin"]],viewQuery:function(r,s){if(1&r&&e.Gf(C,5),2&r){let i;e.iGM(i=e.CRH())&&(s.emailField=i.first)}},decls:30,vars:5,consts:[[1,"row","justify-content-center","mt-5",3,"formGroup","submit"],[1,"col-sm-10","col-md-8","col-lg-6","col-xxl-4","list-unstyled","pt-sm-5"],[1,"mb-4","mb-sm-5","text-center"],[1,"form-floating"],["type","email","formControlName","email","placeholder","Email",1,"form-control","signin-input",3,"ngClass"],["email",""],["for","email"],["type","password","formControlName","password","placeholder","Password",1,"form-control","signin-input",3,"ngClass"],["for","password"],[1,"my-4","text-center"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-center"],["routerLink","/auth/register",1,"nav-link","create-account"],["routerLink","/auth/resetpassword",1,"nav-link"],["routerLink","/auth/resendtoken",1,"nav-link"]],template:function(r,s){1&r&&(e.TgZ(0,"form",0),e.NdJ("submit",function(){return s.signIn()}),e.TgZ(1,"ul",1),e.TgZ(2,"li",2),e.TgZ(3,"h1"),e._uU(4,"Sign In"),e.qZA(),e.qZA(),e.TgZ(5,"li",3),e._UZ(6,"input",4,5),e.TgZ(8,"label",6),e._uU(9,"Email"),e.qZA(),e.qZA(),e.TgZ(10,"li",3),e._UZ(11,"input",7),e.TgZ(12,"label",8),e._uU(13,"Password"),e.qZA(),e.qZA(),e.TgZ(14,"li",9),e.TgZ(15,"button",10),e._uU(16),e.qZA(),e.qZA(),e.TgZ(17,"li",11),e._uU(18," New User? "),e.TgZ(19,"a",12),e.TgZ(20,"small"),e._uU(21,"Create your Account"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"li",11),e.TgZ(23,"a",13),e.TgZ(24,"small"),e._uU(25,"Forgot your password?"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"li",11),e.TgZ(27,"a",14),e.TgZ(28,"small"),e._uU(29,"Verify your Account?"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&r&&(e.Q6J("formGroup",s.signInForm),e.xp6(6),e.Q6J("ngClass",s.signInForm.controls.email.hasError("validateEmail")?"is-invalid":s.signInForm.controls.email.errors?"":"is-valid"),e.xp6(5),e.Q6J("ngClass",s.invalid?"is-invalid":""),e.xp6(4),e.Q6J("disabled",!s.signInForm.valid||s.loading),e.xp6(1),e.Oqu(s.loading?"Logging In...":"Sign In"))},directives:[t._Y,t.JL,t.sg,t.Fj,t.JJ,t.u,d.mk,a.yS],styles:[""]}),o})(),pathMatch:"full"},{path:"register",component:b,pathMatch:"full"},{path:"resetpassword",component:y,pathMatch:"full"},{path:"resendtoken",component:T,pathMatch:"full"},{path:"password/:token",component:v,pathMatch:"full"}];let k=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[a.Bz.forChild(_)],a.Bz]}),o})(),F=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,k,t.UX]]}),o})()}}]);